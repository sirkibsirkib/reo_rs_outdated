1. figure out how pre-compile atomics work
2. 